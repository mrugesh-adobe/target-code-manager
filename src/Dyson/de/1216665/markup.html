
    <style type="text/css" id="recs_style">

	  
	.at_recs_price .trade-up-item__reduced-price{
		text-decoration: line-through;
		font-size: .875rem;
		display: inline-flex;
	}
	  
	.at_recs_price .trade-up-item__reduced-price .curr_before,  .at_recs_price .trade-up-item__savings .curr_before{
		 padding-left: 4px;
	}
    
    .at_recs_price .trade-up-item__savings {
		color: #06c;
		font-size: .875rem;
		display: inline-flex;
		padding-left: 4px;
    }
	
	a.at_recs_card:hover {
		border: 1px solid #333;
	}
	
	.custom-badge.none {
		visibility: hidden;
	}

    .at-table {
        display: flex;
        width: 100%;
        border-spacing: 5px;
    }

    .at-table-row {
        width: 100%;
        clear: both;
    }

    .at-table-column {
        float: left;
        display: flex;
        flex-direction: column;
        flex: 0 0 auto;
        padding: 16px;
    }

    .recs-container {
        padding-top: 3rem;
        padding-bottom: 1rem;
		background: #fcfcfc;
    }

    .recs_wrapper {
        margin: 0;
        padding: 0;
    }

    .image_container {
        position: relative;
    }

    .text_section>h3 {
        margin-bottom: 0;
        padding-bottom: 0 !important;
        padding-top: 0;
    }

    .full_width {
        width: 100% !important;
    }

    .at_recs_price.trade-up-item__regional>button {
        padding: 0;
    }

    .at_recs_card {
        border: 1px solid #dadada;
        background-color: #ffffff;
        text-decoration: none !important;
        display: inline-block;
        width: 100%;
		position: relative;
    }

    .at_recs_card .trade-up-item__badge {
        z-index: 1;
    }

    .mobile_badge,
    .mobile_only_line {
        display: none;
    }

    .at_recs_card .reviews_section {
		padding: 8px 10px 0px 15px;
    }

    .review_stars {
        width: 96px;
        min-height: 18px;
        display: inline-block;
        vertical-align: middle;
        background-position-x: 100%;
        background-repeat: no-repeat;
        background-size: cover;
        background-image: url(https://www.dyson.co.uk/content/dam/dyson/adobetarget/recommendations/review-stars-small-new.png);
        margin-right: 8px;
    }

    .review_stars.five {
        background-position-y: 0;
    }

    .review_stars.four-five {
        background-position-y: 10%;
    }

    .review_stars.four {
        background-position-y: 20%;
    }

    .review_stars.three-five {
        background-position-y: 30%;
    }

    .review_stars.three {
        background-position-y: 40%;
    }
	
	.review_stars.two {
        background-position-y: 60%;
    }
	
	.review_stars.two-five {
        background-position-y: 50%;
    }
	
	.review_stars.one-five {
        background-position-y: 70%;
    }
	
	.review_stars.one {
        background-position-y: 80%;
    }
	
	.review_stars.zero {
        background-position-y: 100%;
        display:none;
    }

    .review_stars.invisible,
    .review_stars.invisible+.review_text {
        visibility: hidden;
        opacity: 0;
    }

    .review_text {
        vertical-align: middle;
        display: inline-block;
    }

    @media screen and (max-width: 767px) {
        .at_recs_card {
            display: flex;
            /* flex-direction: column; */
        }

        .recs-container {
            border-bottom: 1px solid #dadada;
        }
    }

    .at_recs_price {
        /*min-height: 82px;*/
        flex-direction: column;
        justify-content: center;
        padding-top: 8px;
        padding-bottom: 8px;
    }

    .custom-badge {
        color: white;
        background: black;
        top: -13px;
        left: 16px;
        margin-left: 8px;
        z-index: 3 !important;
		position: absolute;
		padding: 2px 8px;
		font-size: 0.875rem;
		font-weight: 500;
    }

    .US_only_at,
    .global_offer_promo,
    .gb_DirectExclusiveBadge,
    .ie_DirectExclusiveBadge,
    .fr_DirectExclusiveBadge,
    .us_DirectExclusiveBadge,
    .be_direct_exclusive,
    .at_DirectExclusiveBadge,
    .gb_offer_promo,
    .us_offer_promo,
    .ca_offer_promo,
    .fr_offer_promo,
    .nl_offer_promo,
    .ie_offer_promo,
    .it_offer_promo,
    .es_offer_promo,
    .at_offer_promo,
    .de_offer_promo {
        background-color: #0066cc;
    }

    .custom-badge.be_promotions,
    .custom-badge.nl_promotions,
    .custom-badge.de_promotions,
    .de_PromotionsBadge,
    .at_PromotionsBadge,
    .custom-badge.gb_Promotions_badge,
    .custom-badge.ie_Promotionsbadge,
    .custom-badge.be_PromotionsBadge,
    .custom-badge.us_PromotionsBadge,
    .fr_PromotionBadgeTheme{
        color: #0066cc !important;
        background-color: #ffffff !important;
        box-shadow: inset 0px 0px 0px 1px #0066cc;
    }

    .gb_popular,
    .us_popular,
    .ca_popular,
    .at_NewTechnologyBadge,
    .fr_popular,
    .nl_popular,
    .ie_popular,
    .it_popular,
    .es_popular,
    .at_popular,
    .de_popular {
        background-color: #ffcc00;
        color: #000;
    }

    .fr_exclusive,
    .nl_exclusive,
    .ie_exclusive,
    .it_exclusive,
    .es_exclusive,
    .at_exclusive,
    .de_exclusive, 
    .gb_exclusive,
    .us_exclusive,
    .ca_exclusive {
        background-color: #333;
        color: #fff;
    }

    .fr_urgency,
    .nl_urgency,
    .ie_urgency,
    .it_urgency,
    .es_urgency,
    .at_urgency,
    .de_urgency,
    .gb_urgency,
    .us_urgency,
    .ca_urgency, 
    .ca_educational {
        background-color: #d9384e;
        color: #fff;
    }

    .gb_educational,
    .us_educational,
    .fr_educational,
    .nl_educational,
    .ie_educational,
    .it_educational,
    .es_educational,
    .at_educational,
    .de_educational,
    .fr_BestSellersBadge{
        background-color: #fff;
        color: #333 !important;
        box-shadow: inset 0px 0px 0px 1px #333333;
    }

    @media screen and (max-width: 767px) {
        .at_recs_card {
            display: flex;
            /* flex-direction: column; */
        }

        .recs-container {
            border-bottom: 1px solid #dadada;
        }
    }

    @media(max-width: 480px) {
        .at_recs_card>.image_container>.at-thumbnail {
            /*width: 12rem;*/
	    max-height: 220px;
            width: auto;
        }

        .at_recs_card>.text_section>h3,
        .at_recs_card>.text_section>.at_recs_price>div.trade-up-item__price--blue>.price,
        .trade-up-item__price {
            font-size: 16px;
			font-weight: 500;
			color: #333;
        }

        .at-table-column {
            padding-top: 0;
            padding-bottom: 0;
			max-width: 60%;
			margin-bottom: 20px;
        }

        .at_recs_card {
            border: none;
        }

        .at_recs_card .text_section {
            display: flex;
            flex-direction: column;
            flex-wrap: nowrap;
            align-items: flex-start;
        }

        .mobile_only_line {
            display: inline-block;
            width: 114%;
            position: absolute;
            /* height: 1px; */
           /* border-top: 1px solid #dadada; */
            top: 0;
            margin-left: -12%;
        }

        .custom-badge {
            display: inline-block;
            margin-top: 0;
            margin-left: 1rem;
            position: absolute;
            top: -10px;
            left: 0;
            margin-bottom: 8px;
            order: -1;
			padding: 3px;
        }
		
		.carousel button:focus {
			outline: none !important;
		}

        .at_recs_card>.badge {
            display: none;
        }

        .mobile_badge {
            display: inline-block;
            margin-top: 1rem;
            margin-left: 1rem;
            position: relative;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            margin-bottom: 8px;
        }

        .at_recs_card .reviews_section {
           padding: 8px 10px 0px 15px;
        }

        .review_stars {
            width: 92px;
            min-height: 16px;
        }
    }
	
	div.trade-up-item__price--blue {
		color: #06c;
		font-size: 24px;
		font-weight: 500;
	}

    @media screen and (min-width: 481px) and (max-width: 1024px) {
        .at_recs_card>.image_container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .at_recs_card>.image_container>.at-thumbnail {
            /*width: 113px;*/
            /*height: auto;*/
            width:auto;
            height:220px;
            margin-top: 1px;
        }


        .at_recs_card>.text_section>h3,
        .at_recs_card>.text_section>.at_recs_price>div.trade-up-item__price--blue>.price,
        .trade-up-item__price {
            font-size: 16px;
			font-weight: 500;
			color: #333;
        }

        .at-table-column {
            padding: 16px 11px;
        }

        .custom-badge {
            left: 11px;
        }
    }

    @media screen and (min-width: 1025px) {
        .at_recs_card>.image_container {
            display: flex;
            justify-content: center;
        }

        .at_recs_card>.image_container>.at-thumbnail {
            /*width: 195px;*/
            /*height: auto;*/
            margin-top: 1px;
            max-height: 240px;
            width: auto;
        }

        .at_recs_card .text_section>h3,
        .at_recs_card .text_section>.at_recs_price>div.trade-up-item__price--blue>.price,
        .trade-up-item__price {
            font-size: 18px;
			font-weight: 500;
			color: #333;
        }
		
		.carousel {
			margin:0 auto !important;
		}

    }

    .see-more-section {
        padding: 0px !important;
    }

    .promoText-section {
        color: #06c;
    }

	.recs_wrapper.carousel{
		width:100%;
		margin:0px;
		visibility: visible;
		display: inline-flex;
	}
.recs_wrapper .slick-slide{
  margin:10px;
}
.recs_wrapper .slick-slide img{
  width:100%;
  border: 2px solid #fff;
}
.recs_wrapper .wrapper .slick-dots li button:before {
  font-size:20px;
  color:white;
}
	 @media screen and (max-width: 500px) {
		.recs_wrapper.carousel.slick-initialized.slick-slider {
		position: relative;
		display: flex;
		box-sizing: border-box;
		} 
		
		.recs_wrapper.carousel a.at_recs_card {
			display: block !important;
			 border: 1px solid #dadada;
			background-color: #ffffff;
			text-decoration: none !important;
			display: inline-block;
			width: 100%;
			padding: 0;
			position: relative;
		}
		
		.at_recs_card>.image_container {
			display: flex;
			justify-content: center;
			
		}
		
		  .recs_wrapper .slick-slide .at-table-column {
			  padding: 0;
		  }
		  
		  .at_recs_price.trade-up-item__regional {
			  width: 100% !important;
		  }
		  div.trade-up-item__price--blue {
				padding-bottom: 10px;
			}
			
			a.at_recs_card:hover, a.at_recs_card:focus, a.at_recs_card:active {
				border: 1px solid #333;
				color: #333;
				outline: none;
			}
			
			.recs-container .row {
				width: 100% !important;
				margin-left: 25px !important;
			}
	 }
	 
	 .recs_wrapper .slick-list{padding:0 40% 0 0 !important; }
	 
	 .recs_wrapper .slick-prev, .recs-container .slick-next {
		font-size: 0;
		line-height: 0;
		position: absolute;
		top: 47%;
		display: block;
		width: 35px;
		height: 35px;
		padding: 0;
		margin-top: -10px \9;
		-webkit-transform: translate(0, -50%);
		-ms-transform: translate(0, -50%);
		transform: translate(0, -50%);
		cursor: pointer;
		color: transparent;
		border: none;
		border-radius: 17px;
		background: #a7a4a4;
	 }

	 .recs_wrapper .slick-next {
		left: 83%;
	 }
	 
	.recs_wrapper .slick-prev {
		 z-index: 99;
		 right: 86%;
	 }
	
	
	.recs_wrapper .slick-next:before {
		content: '→';
		transform: rotate(-45deg);
		-webkit-transform: rotate(-45deg);
		left: -2px;
		font-size: 0;
	}
	.recs_wrapper .slick-prev:before {
		content: '←';
		 transform: rotate(135deg);
		-webkit-transform: rotate(135deg);
		right: -3px;
		font-size: 0;
	}
	
	.recs_wrapper .slick-prev:before, .recs-container .slick-next:before {
		 color: white;
		 -webkit-font-smoothing: antialiased; 
		border: solid white;
		border-width: 0 5px 5px 0;
		display: inline-block;
		padding: 5px;
		box-shadow: 1px 1px 0px rgba(0, 0, 0, 0.1);
		position: relative;
	}
	
	.recs_wrapper .slick-disabled {
		opacity: 0;
		pointer-events: none;
	}
	
	.recs_wrapper .slick-track {
		display: flex !important;
	}
	.recs_wrapper .slick-slide
	{
		height: inherit !important;
	}
	
	.trade-up-item__price {
		border-top: 1px solid #dadada;
		padding-left: 15px;
		padding-top: 10px;
		font-size: 24px;
	}
	
	.trade-up-item__text.trade-up-item__name {
		line-height: 1.3;
		padding-right: 10px;
	}
	
	 @media screen and (min-width: 768px) and (max-width: 1024px) {
		 .recs_wrapper.carousel {
			margin: 0 auto !important;
		 }
		 .recs_wrapper.carousel li:nth-child(4) {
			 display: none;
		 }
		 .at-table-column.col-xs-12.col-md-3 {
			 width: 33.33%
		 }
	 }
	 
	 
	 .review_text {
		 font-size: 0.875rem;
	 }
	 .trade-up-item__price--blue, .trade-up-item__reduced-price, .trade-up-item__text {
		 padding-left: 15px;
	 }
	 
	 .recs_wrapper #chevron-bold-sr {
		 display: none !important;
	 }

	 
	 .recs_wrapper .slick-track:after, .slick-track:before {
		 display: none;
	 }
	 
	 .at_recs_card .js-product-hero-promo-message {
	margin-top: 0;
	padding-left: 15px;
	padding-right: 15px;
	margin-bottom: .5rem;
}

.at_recs_card .js-product-hero-promo-message ul.list {
	padding-left: 0;
}

.at_recs_card .js-product-hero-promo-message .js-promotional-details-message {
	list-style-type: none;
    color: #06c;
}

.at_recs_card .js-product-hero-promo-message li strong {
	overflow: hidden;
   text-overflow: ellipsis;
   display: -webkit-box;
   -webkit-line-clamp: 2; 
           line-clamp: 2;
   -webkit-box-orient: vertical;
       font-weight:400!important;
}

.product-hero__new-label.new-badge {
	display: inline;
    padding-left:15px;
    border: none;
    font-weight: 500;
    color: #ac5d00;
}
	 
	
</style>
<script type="text/javascript">
    /*!
     * flickerlessly.js v0.2.1
     * @author Vadym Ustymenko
     * @copyright 1996-2019. Adobe Systems Incorporated. All rights reserved.
     * @usage: Flickerlessly.onReady({selector:'.a, .b', success:function(el, log){}},
     *                              {selector:'.c', success:myCallbackFn, persist:true });
     */
	 
	     var addPriceHeight = function () {
        if (!document.querySelector('.at_recs_price.trade-up-item__regional[reduced]')) {
            return;
        }
        if (!document.getElementById('reduced_price_style')) {
            document.body.insertAdjacentHTML('afterbegin', '<style id="reduced_price_style"></style>');
        }
        
    },
        matchHeight = function () {
            /*name height*/
            var names = document.querySelectorAll('.at_recs_card .trade-up-item__text.trade-up-item__name'), reviews = document.querySelectorAll('.at_recs_card .text_section .trade-up-item__text.reviews_section'), priceSection=document.querySelectorAll('.at_recs_price.trade-up-item__regional'),promoSection=document.querySelectorAll('.at_recs_card .js-product-hero-promo-message'), newBadgeLabel=document.querySelectorAll('.product-hero__new-label.new-badge'), max = 0;
            if (jQuery(window).width() < 100) {
                for (var i = names.length - 1; i >= 0; i--) {
                    names[i].style.minHeight = max;
                }
                for (var i = reviews.length - 1; i >= 0; i--) {
                    reviews[i].style.minHeight = max;
                }
            } else {
                for (var i = names.length - 1; i >= 0; i--) {
                    max = names[i].offsetHeight > max ? names[i].offsetHeight : max;
                }
                for (var i = names.length - 1; i >= 0; i--) {
                    names[i].style.minHeight = max + 'px';
                }
                max = 0;
                for (var i = reviews.length - 1; i >= 0; i--) {
                    max = reviews[i].offsetHeight > max ? reviews[i].offsetHeight : max;
                }
                for (var i = reviews.length - 1; i >= 0; i--) {
                    reviews[i].style.minHeight = max + 'px';
                }
				max = 0;
                for (var i = priceSection.length - 1; i >= 0; i--) {
                    max = priceSection[i].offsetHeight > max ? priceSection[i].offsetHeight : max;
                }
                for (var i = priceSection.length - 1; i >= 0; i--) {
                    priceSection[i].style.minHeight = max + 'px';
                }
				max = 0;
                for (var i = promoSection.length - 1; i >= 0; i--) {
                    max = promoSection[i].offsetHeight > max ? promoSection[i].offsetHeight : max;
                }
                for (var i = promoSection.length - 1; i >= 0; i--) {
                    promoSection[i].style.minHeight = max + 'px';
                }
                max = 0;
                for (var i = newBadgeLabel.length - 1; i >= 0; i--) {
                    max = newBadgeLabel[i].offsetHeight > max ? newBadgeLabel[i].offsetHeight : max;
                }
                for (var i = newBadgeLabel.length - 1; i >= 0; i--) {
                    newBadgeLabel[i].style.minHeight = max + 'px';
                }
            }
        },
		loadCarousel = function() {
			if ((typeof (jQuery) != 'undefined' &&
							typeof jQuery.fn.slick !== "undefined") && !document.querySelector('.recs_wrapper .slick-next.slick-arrow')) {
					var jq = jQuery.noConflict();
					if(window.innerWidth < 500){
						setTimeout(function(){
							jq('.recs_wrapper.carousel').slick({
						  slidesToShow: 1,
						  dots:false,
						  centerMode: false,
							infinite: false,
							slidesToScroll: 1
						  });
						  document.querySelectorAll('.at-table-column').forEach(function(i){
							  i.style.maxWidth='100%';
						  });
						  clearInterval(loadCarousel);
						  document.querySelector('.recs_wrapper.carousel').style.visibility = 'visible';
						},500);
						setTimeout(function () {
							matchHeight();
							addPriceHeight();
						}, 500);
					} 
							}
							
							if(window.innerWidth > 500){
						document.querySelector('.recs_wrapper.carousel').style.visibility = 'visible';
						 setTimeout(function () {
							matchHeight();
							addPriceHeight();
						}, 500);
					}
		}
		
    window.addEventListener('load', function () {
        setTimeout(function () {
            matchHeight();
            addPriceHeight();
        }, 2500);
        setTimeout(function () {
            matchHeight();
            addPriceHeight();
        }, 2500);
        setTimeout(function () {
            matchHeight();
            addPriceHeight();
        }, 2500);
    })
    window.addEventListener('resize', function () {
        setTimeout(function () {
            matchHeight();
            addPriceHeight();
        }, 2500);
    });
	
	
    window._dtag = '', window._lang = '',
        header = 'Featured',
        see_more = 'Shop now',
        reviewLang = 'reviews',
        oosLocal = ' - alternative machines available to order now';

    if (location.host.indexOf('.de') > -1) {
        _dtag = 'de';
        header = 'Deine Black Friday Highlights';
        see_more = 'Mehr erfahren';
        reviewLang = 'Bewertungen';
        oosLocal = ' ';
    } else if (location.host.indexOf('.com') == 9) {
       header = 'Black Friday offers';
        _dtag = 'us';
    } else if (location.host.indexOf('.ie') > -1) {
       header = 'Your exclusive offers';
        _dtag = 'ie';
    } else if (location.host.indexOf('.at') > -1) {
        _dtag = 'at';
        header = 'Deine Black Friday Highlights';
        see_more = 'Mehr erfahren';
        reviewLang = 'bewertungen';
        oosLocal = ' ';
    } else if (location.host.indexOf('.es') > -1) {
        _dtag = 'es';
        header = 'Las mejores ofertas de Black Friday';
        see_more = 'Descubre más';
        reviewLang = 'opiniones';
        oosLocal = ' - productos alternativos disponibles para comprar ahora';
    } else if (location.host.indexOf('.nl') > -1) {
        _dtag = 'nl';
        header = 'Aanbevolen voor jou';
        see_more = 'Meer informatie';
        reviewLang = 'beoordelingen';
        oosLocal = ' - alternatieve machines beschikbaar om nu te bestellen';
    } else if (location.host.indexOf('.fr') > -1) {
        _dtag = 'fr';
        see_more = 'En savoir plus';
        header = 'Meilleures offres Black Friday';
        reviewLang = 'avis';
        oosLocal = ' - produits similaires disponibles';
    } else if (location.host.indexOf('.it') > -1) {
        _dtag = 'it';
        header = 'Le migliori offerte del Black&nbsp;Friday Gran Finale';
        see_more = 'Scopri di più';
        reviewLang = 'recensioni';
        oosLocal = " - macchine alternative disponibili per l'ordine ora";
    } else if (location.pathname.indexOf('/nl_be/') > -1) {
        _dtag = 'be';
        _lang = 'nl';
        header = 'Aanbevolen voor jou';
        see_more = 'Meer informatie';
        reviewLang = 'beoordelingen';
        oosLocal = ' - alternatieve machines beschikbaar om nu te bestellen';
    } else if (location.pathname.indexOf('/nl') > -1) {
        _dtag = 'be';
        _lang = 'nl';
        header = 'Aanbevolen voor jou';
        see_more = 'Meer informatie';
        reviewLang = 'beoordelingen';
        oosLocal = ' - alternatieve machines beschikbaar om nu te bestellen';
    } else if (location.pathname.indexOf('/fr_be/') > -1) {
        _dtag = 'be';
        _lang = 'fr';
        see_more = 'En savoir plus';
        header = 'Recommandé pour vous';
        reviewLang = 'avis';
        oosLocal = ' - machines alternatives disponibles à la commande maintenant';
} else if (location.pathname.indexOf('/fr') > -1) {
        _dtag = 'be';
        _lang = 'fr';
        see_more = 'En savoir plus';
        header = 'Recommandé pour vous';
        reviewLang = 'avis';
        oosLocal = ' - machines alternatives disponibles à la commande maintenant';
    }
    else if (location.host.indexOf('.pt') > -1) {
        _dtag = 'pt';
        see_more = 'Saber mais';
        header = 'As melhores ofertas da Black Friday';
        reviewLang = 'comentários';
        oosLocal = ' - outros produtos disponíveis para comprar agora';
    }
    else if (location.host.indexOf('.se') > -1) {
        _dtag = 'se';
        see_more = 'Se mer';
        header = 'Rekommenderat för dig';
        reviewLang = 'kundomdömen';
        oosLocal = ' - alternativa maskiner tillgängliga att beställa nu';
    }
    else if (location.host.indexOf('.dk') > -1) {
        _dtag = 'dk';
        see_more = 'Se mere';
        header = 'Anbefalet til dig';
        reviewLang = 'anmeldelser';
        oosLocal = ' - alternative maskiner kan bestilles nu';
    }
    else if (location.host.indexOf('fi.dyson.com') > -1) {
        _dtag = 'fi';
        see_more = 'Katso lisää';
        header = 'Suositeltu sinulle';
        reviewLang = 'arvostelua';
        oosLocal = ' - vaihtoehtoisia koneita nyt tilattavissa';
    }
    else if (location.host.indexOf('.no') > -1) {
        _dtag = 'no';
        see_more = 'Se mer';
        header = 'Anbefalt for deg';
        reviewLang = 'anmeldelser';
        oosLocal = ' - alternative maskiner tilgjengelig for bestilling nå';
     }else if (location.host.indexOf('.jp') > -1) {
        header = '迷わず選べる人気モデル';
        see_more = '製品を見る';
        reviewLang = '評価';
        oosLocal = ' - machines alternatives disponibles à la commande maintenant';
        }  
    else if (location.host.indexOf('.ch') > -1) {
        _dtag = 'ch';
        if(document.documentElement.lang=='de-CH'){
        header = 'Deine Black Friday Highlights';
        see_more = 'Mehr erfahren';
        reviewLang = 'bewertungen';
        oosLocal = ' ';
        }else if(document.documentElement.lang=='it-CH'){
        header = 'Consigliato per te';
        see_more = 'Scopri di più';
        reviewLang = 'recensioni';
        oosLocal = " - macchine alternative disponibili per l'ordine ora";
        }else if(document.documentElement.lang=='fr-CH'){
        header = 'Recommandé pour vous';
        see_more = 'En savoir plus';
        reviewLang = 'avis';
        oosLocal = ' - machines alternatives disponibles à la commande maintenant';
        }
    } else if (location.host.indexOf('.uk') > -1) {
		_dtag = 'gb';
       header = 'Your exclusive offers';
	} else if (location.host.indexOf('.ca') > -1) {
		_dtag = 'ca';
	} else if (location.host.indexOf('.be') > -1) {
		_dtag = 'be';
	}

if (location.host.indexOf('.ca') > -1) {
if (location.pathname.indexOf('/en') > -1) {
header = 'Black Friday bestsellers',
see_more = 'Shop now',
reviewLang = 'reviews',
oosLocal = ' - alternative machines available to order now';
} else if (location.pathname.indexOf('/fr') > -1) {
header = 'Meilleures ventes du Vendredi fou';
see_more = 'Voir plus';
reviewLang = 'avis';
oosLocal = ' - machines alternatives disponibles à la commande maintenant';
}
}

    (function (w, d) {
        var logInfo = function (str) {
        }
        var Flickerlessly = w.Flickerlessly || {}; !function (t) { "use strict"; var e = function (t, e, n, o) { var a = "atNodeInserted" + t, i = [], s = ["", "-moz-", "-webkit-", "-ms-", "-o-"]; s.forEach(function (t, e) { i.push("@" + t + "keyframes " + a + " {from {opacity:0.99} to {opacity:1}}") }), i.push(e + "{"), s.forEach(function (t, e) { i.push(t + "animation-duration:0.001s;" + t + "animation-name:" + a + ";") }), i.push("}"); var r = d.getElementsByTagName("head")[0]; if (r) { var c = d.createElement("style"); c.setAttribute("type", "text/css"), c.styleSheet ? c.styleSheet.cssText = i.join("\n") : c.appendChild(d.createTextNode(i.join("\n"))), r.insertBefore(c, r.firstChild) } var l = function (t) { if (t.animationName === a && "object" == typeof t.target) { var i = o === !0 || o === !1 && null === t.target.getAttribute("data-flk-success"); w.console && logInfo("('" + e + "') ready! Execute: " + i, t.target), "function" == typeof n && i ? (n(t.target), t.target.setAttribute("data-flk-success", a)) : w.console && console.error("Cannot Callback", i, n) } };["animationstart", "MSAnimationStart", "webkitAnimationStart"].forEach(function (t, e) { d.addEventListener(t, l, !1) }) }, n = Math.floor(1e3 * Math.random() + 1); t.onReady = function () { for (var t = 0; t < arguments.length; t++) { var o = arguments[t], a = o.selector, i = o.success || null, s = o.persist || !1; e(n++, a, i, s) } } }(Flickerlessly);

/* change: reviews added as a selector */

        Flickerlessly.onReady(
            {
				selector: '#skip-navigation-target .product-specification.parbase:not(.at_target), div.product-review:not(.at_target)',
                success: function (el) {
                    el.className += ' at_target';
                    if (document.querySelector(".sticky-nav__button .button--notifyMe") == null) {
                        if (document.querySelector('.recs-container')) {
                            var r = document.querySelector('.recs-container');
                            r.parentNode.removeChild(r);
                        }
                        var recsContent = document.getElementById('at_template_recs').innerHTML;
						if(document.querySelector('#skip-navigation-target .product-specification.parbase')
                        .classList.contains('product-specification')) {
							 document.querySelector('#skip-navigation-target .product-specification.parbase')
                             .insertAdjacentHTML('beforebegin', recsContent);
						} else {
							 document.querySelector('div.product-review').insertAdjacentHTML('afterend', recsContent);
						}
                    }
                },
                persist: true
            },
            {
                selector: '.product-hero.parbase:not(.at_target)',
                success: function (el) {

                    el.className += ' at_target';
                    if (document.querySelector(".sticky-nav__button .button--notifyMe") != null) {
                        if (document.querySelector('.recs-container')) {
                            var r = document.querySelector('.recs-container');
                            r.parentNode.removeChild(r);
                        }
                        var recsContent = document.getElementById('at_template_recs').innerHTML;
                        document.querySelectorAll(".product-hero")[0].insertAdjacentHTML('afterend', recsContent);
                    }
                },
                persist: true
            }, /* change 6 ends */
            {
                selector: ".at_recs_card .at_recs_price > .atBluePrice",
                success: function (el) {
                    el=el.querySelector('.trade-up-item__price--blue');
                    el = el.parentNode.querySelector('.trade-up-item__reduced-price');
                   
					 setTimeout(function () {
							matchHeight();
							addPriceHeight();
						}, 500);
                },
                persist: true
            },
            {
                selector: ".at_recs_card ",
                success: function (el) {
                    var domain = el.getAttribute('region'), sku = el.getAttribute('sku'), base_url = '', rating='';
                    if (domain === 'ca') {
                        base_url = 'https://api.dyson.co.uk/apiman-gateway/dyson/product/1.0/ca/';
                    } else if (domain === 'us') {
                        base_url = 'https://api.dyson.com/apiman-gateway/dyson/product/1.0/us/';
                    } else if(domain === 'uk') {
						base_url = 'https://api.dyson.com/apiman-gateway/dyson/product/1.0/gb/';
					}
                    else if (domain === window._dtag) {
                        base_url = 'https://api.dyson.co.uk/apiman-gateway/dyson/product/1.0/' + window._dtag + '/';
                    }
					//rating = el.querySelector('review_stars').innerHTML;
                    fetchRating(base_url, sku.replace(window._dtag.toUpperCase(), ""), domain, rating);

                    el.querySelector('.see-more-section span').innerHTML = see_more;
					

                    if (document.querySelector('.recs-container h2.trade-up-header__content.hidden-xs-up')) {
                        /* change 4 starts : added message for oos products */
                        var oosMessage = "";
                        if (document.querySelector(".sticky-nav__button .button--notifyMe") != null) {
                            oosMessage = oosLocal;
                        }
                        /* change 4 ends : added oos message in next line (530) for oos products */
                        document.querySelector('.recs-container h2.trade-up-header__content.hidden-xs-up').innerHTML = header + oosMessage;;
                        document.querySelector('.recs-container h2.trade-up-header__content').className = 'trade-up-header__content js-trade-up-header-content col-xs-12';
                    }
                },
                persist: true
            },
			    {
				selector: '.recs_wrapper.carousel',
                success: function (el) {
					if (window.innerWidth < 500) {
					setInterval(loadCarousel, 1000);
							}
                },
                persist: true
            });
        var fetchRating = function (base_url, sku, domain, rating) {
			sku=sku.replace("US", "").replace("GB", "").replace("CA", "").replace('BE','').replace('CH','');
            var xhttp = new XMLHttpRequest();
            var id = sku + window._dtag.toUpperCase();
			if(domain=='jp') {
				id = sku;
			}
			if(domain=='at') {
				let ratings = document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .review_stars').innerHTML;
				document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .review_stars').innerHTML = '';
				let stars = "";
				if (Number(ratings) >= 5) {
                                stars = 'five'
                            } else if (Number(ratings) >= 4.5) {
                                stars = 'four-five'
                            } else if (Number(ratings) >= 4) {
                                stars = 'four';
                            } else if (Number(ratings) >= 3.5) {
                                stars = 'three-five';
                            } else if (Number(ratings) >= 3) {
                                stars = 'three';
                            } else if (Number(ratings) >= 2.5) {
                                stars = 'two-five';
                            } else if (Number(ratings) >= 2) {
                                stars = 'two';
                            } else if (Number(ratings) >= 1.5) {
                                stars = 'one-five';
                            } else if (Number(ratings) >= 1) {
                                stars = 'one';
                            } else if (Number(ratings) < 1) {
                                stars = 'zero';
                            }
				 let prodName = document.querySelector('.at_recs_card[sku="' + id + '"] .text_section h3').textContent;
							document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .review_stars').className += (' ' + stars);
                            document.querySelector('.at_recs_card[sku="' + id + '"] img.at-thumbnail').setAttribute('alt', prodName);
							return;
			}
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    try {
                        var res = JSON.parse(this.responseText),
                            ratings = res['bazaarVoiceAverageRating'],
                            reviews = res["bazaarVoiceNumberOfReviews"],
                            hideWasNowPricing = res["hideWasNowPricing"];
                        if (id && document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section')) {
                            var stars = "";
                            if (hideWasNowPricing) {
                                document.querySelector('.at_recs_card[sku="' + id + '"]').setAttribute('hidewasnowpricing', true);
                            }

                            if (isNaN(Number(ratings))) {
									stars = 'zero';
                            }
                            if (Number(ratings) >= 5) {
                                stars = 'five'
                            } else if (Number(ratings) >= 4.5) {
                                stars = 'four-five'
                            } else if (Number(ratings) >= 4) {
                                stars = 'four';
                            } else if (Number(ratings) >= 3.5) {
                                stars = 'three-five';
                            } else if (Number(ratings) >= 3) {
                                stars = 'three';
                            } else if (Number(ratings) >= 2.5) {
                                stars = 'two-five';
                            } else if (Number(ratings) >= 2) {
                                stars = 'two';
                            } else if (Number(ratings) >= 1.5) {
                                stars = 'one-five';
                            } else if (Number(ratings) >= 1) {
                                stars = 'one';
                            } else if (Number(ratings) < 1) {
                                stars = 'zero';
                            }

                            /* change 2: fetched product name */
                            var prodName = document.querySelector('.at_recs_card[sku="' + id + '"] .text_section h3').textContent;
							document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .review_stars').className += (' ' + stars);
							if(reviews != undefined) {
                            document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .review_stars').setAttribute('ratings', ratings);
                            
                            document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .review_text').innerHTML = reviews; 
                            document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section').removeAttribute('style');

                            /* change 3: added next three lines for accessibility div */
                            document.querySelector('.at_recs_card[sku="' + id + '"] .reviews_section .sr-only.ratings__stars--reader').textContent = ratings + ' stars out of 5 from ' + reviews + ' Reviews';
                            document.querySelector('.at_recs_card[sku="' + id + '"] img.at-thumbnail').setAttribute('alt', prodName);
							}
                        } else {
                        }
                    } catch (err) {

                    }
                }
            };
            xhttp.open("GET", base_url + sku, true);
            xhttp.send();
        }

    })(window, document);
</script>